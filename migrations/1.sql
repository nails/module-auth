CREATE TABLE `nails_user_auth_two_factor_device_secret` (`id` int(11) unsigned NOT NULL AUTO_INCREMENT, `userId` int(11) unsigned NOT NULL, `secret` varchar(500) NOT NULL DEFAULT '', `created` datetime NOT NULL, PRIMARY KEY (`id`), KEY `user_id` (`userId`,`secret`(255)), CONSTRAINT `nails_user_auth_two_factor_device_secret_ibfk_1` FOREIGN KEY (`userId`) REFERENCES `nails_user` (`id`) ON DELETE CASCADE) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE `nails_user_auth_two_factor_device_code` (`id` int(11) unsigned NOT NULL AUTO_INCREMENT, `secretId` int(11) unsigned NOT NULL, `code` varchar(10) NOT NULL DEFAULT '', `used` datetime NOT NULL, PRIMARY KEY (`id`), KEY `secret_id` (`secretId`), CONSTRAINT `nails_user_auth_two_factor_device_code_ibfk_1` FOREIGN KEY (`secretId`) REFERENCES `nails_user_auth_two_factor_device_secret` (`id`) ON DELETE CASCADE) ENGINE=InnoDB DEFAULT CHARSET=utf8;
